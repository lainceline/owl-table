var OwlInput=React.createClass({displayName:"OwlInput",propTypes:{column:React.PropTypes.object.isRequired,row:React.PropTypes.object},keydown:function(a){var b=$(this.getDOMNode());a.persist();"number"===this.props.column.type&&(/\D/.test(String.fromCharCode(a.which))?(a.preventDefault(),b.tooltip("show")):b.tooltip("hide"))},inputDidChange:function(a){a.persist();this.debouncedInputDidChange(a)},debouncedInputDidChange:_.debounce(function(a){this.props.tableDidChange(a,this.props.row,this.props.column)},
200),transmitSaveEvent:function(a){var b=$(this.getDOMNode()),c=this.props;b.trigger("owlTableUpdated",[c.column,c.row,a.target.value]);"checkbox"!==c.column.type&&this.props.closeCell()},handleSpecialFields:function(a){a.persist();this.props.tableDidChange(a,this.props.row,this.props.column);this.transmitSaveEvent(a)},handleCheckboxChange:function(a){a.persist();var b=this.refs.checkbox.getDOMNode().checked?"Y":"N";a.target.value=b;this.props.tableDidChange(a,this.props.row,this.props.column);this.transmitSaveEvent(a)},
render:function(){var a=this.props,b;b=a.column.options;var c=this;switch(a.column.type){case "number":case "text":b=React.createElement("input",{className:"owl-input","data-container":"body","data-toggle":"tooltip","data-trigger":"click","data-placement":"right",title:"Numbers only",type:"text",onBlur:c.transmitSaveEvent,defaultValue:a.value,onKeyPress:c.keydown,formNoValidate:!0,noValidate:!0,onChange:c.inputDidChange});break;case "select":case "select_one":case "select_multiple":b=b.map(function(a,
b){var c=$("<p>").html(a.text).text();return React.createElement("option",{key:b,value:a.value},c)});if("select_multiple"===a.column.type){a=a.value?a.value.split("||"):a.value;if(_.isUndefined(a)||!_.isArray(a))a=[];b=React.createElement("select",{onChange:c.handleSpecialFields,className:"swiftbox",multiple:!0,defaultValue:a},b)}else b=React.createElement("select",{onChange:c.handleSpecialFields,className:"swiftbox",defaultValue:a.value},b);break;case "checkbox":b=React.createElement("label",{className:"owl-check-label"},
React.createElement("input",{ref:"checkbox",className:"owl-input",type:"checkbox",onChange:c.handleCheckboxChange,value:"Y",defaultChecked:a.value?!0:!1}));break;case "radio":var d=a.column.field+"_"+a.row.id;b=b.map(function(a,b){return React.createElement("div",{key:b,className:"radio"},React.createElement("label",null,React.createElement("input",{className:"owl-input",type:"radio",onChange:c.transmitSaveEvent,defaultValue:a.value,name:d}),React.createElement("span",{dangerouslySetInnerHTML:{__html:a.text}})))});
b=React.createElement("div",null,b);break;case "date":b=React.createElement("input",{className:"owl-input",defaultValue:a.value,"data-date-format":"dd/mm/yyyy","data-provide":"datepicker"});break;case "time":b=React.createElement("input",{className:"owl-input",type:"time",onChange:c.handleSpecialFields,defaultValue:a.value});break;case "file":b=React.createElement("span",null," File upload not supported yet ");break;case "log":b=React.createElement("span",null," Log field not supported yet ");break;
case "placeholder":b=React.createElement("span",null," Placeholder ");break;default:b=React.createElement("span",null," ",a.value," "),console.error('Invalid field type "'+a.column.type+'" for field '+a.column.field)}return b},componentDidMount:function(){var a=this;$(a.getDOMNode()).focus();if("date"===a.props.column.type)$(a.getDOMNode()).on("changeDate",function(b){b.target.value=b.format().toUpperCase();a.props.tableDidChange(b,a.props.row,a.props.column);a.transmitSaveEvent(b)});"number"===a.props.column.type&&
$(a.getDOMNode()).tooltip()},componentDidUpdate:function(){var a=this;if("date"===a.props.column.type)$(a.getDOMNode()).on("changeData",function(b){b.target.value=b.format().toUpperCase();a.props.tableDidChange(b,a.props.row,a.props.column);a.transmitSaveEvent(b)})}}),OwlCell=React.createClass({displayName:"OwlCell",propTypes:{column:React.PropTypes.object.isRequired,row:React.PropTypes.object,editable:React.PropTypes.bool},getDefaultProps:function(){return{open:!1,editable:!0,isChild:!1,isChildColumn:!1}},
getInitialState:function(){return{open:!1}},open:function(){this.state.open||this.setState({open:!0})},close:function(){this.state.open&&this.setState({open:!1})},onKeydown:function(a){},render:function(){var a=this.props,b,c,d;b=a.row[a.column.field];var e="owl-cell-value-label owl-editable";if("undefined"===typeof b&&(b=a.row[a.column.field.toUpperCase()],"undefined"===typeof b&&(b=a.row[a.column.field.toLowerCase()],"undefined"===typeof b)))return a.isChild||a.isChildColumn?React.createElement("td",
{className:"owl-empty-child-cell"}):React.createElement("td",null,"---");"checkbox"===a.column.type&&(b=this.decorateCheckboxValue(b));"radio"===a.column.type&&(b=this.textForRadioValue(b));if(-1<a.column.type.indexOf("select")){var k=[];"select_multiple"===a.column.type&&(k=_.compact(a.row[a.column.field]?a.row[a.column.field].split("||"):a.row[a.column.field]));1<k.length?d=_(a.column.options).filter(function(a){if(_.contains(k,a.value))return!0}).pluck("text").value().join(", "):(d=a.column.options.filter(function(b,
c){if(b.value==a.row[a.column.field])return!0}),"undefined"!==typeof d&&0<d.length?d=d[0].text:(d=a.row[a.column.field],e+=" owl-invalid"));d="undefined"!==typeof d?d:a.row[a.column.field];a.isChild&&(e+=" owl-child-cell");c=React.createElement("span",{className:e,dangerouslySetInnerHTML:{__html:d}})}else a.isChild&&(e+=" owl-child-cell"),c=React.createElement("span",{className:e,dangerouslySetInnerHTML:{__html:b}});!0===this.state.open&&(c=React.createElement(OwlInput,{className:a.column.field,column:a.column,
value:b,row:a.row,tableDidChange:a.tableDidChange,closeCell:this.close}));var l=-1<_.indexOf(a.row.lockedCells,a.column.field),e=a.column.field;"undefined"!==typeof a.column.tacky&&!0===a.column.tacky.left&&(e+=" tacky-left");a.isChild&&(e+=" owl-child-cell");!0===a.editable&&!0!==l?b=React.createElement("td",{className:e,"data-field":a.column.field,onClick:this.open},c):(b=-1<a.column.type.indexOf("select")?d:b,b=React.createElement("td",{className:e,"data-field":a.column.field},React.createElement("span",
{className:"owl-cell-value-label owl-value",dangerouslySetInnerHTML:{__html:b}})));return b},decorateCheckboxValue:function(a){switch(a){case !0:case "true":case "Y":return'<i class="owl-checked glyphicon glyphicon-ok"></i>';case !1:case "N":case "false":return'<i class="owl-unchecked glyphicon glyphicon-remove"></i>';default:return a}},textForRadioValue:function(a){var b=a,c=_.indexBy(this.props.column.options,"value");_.isUndefined(c[a])||(b=c[a].text);return b},componentDidUpdate:function(){var a=
this;!1!==this.props.focusedCell&&this.props.focusedCell.find("input").focus();var b=$(this.getDOMNode()).find(".swiftbox");0<b.length&&(b=b.swiftbox(),b.each(function(b,d){d=$(d);d.off("change");d.change(function(b){var c=$(a.getDOMNode()),l=a.props,f=d.swiftbox("value");"select_multiple"===l.column.type&&(f=f.join("||"));b.target.value=f;l.tableDidChange(b,l.row,l.column);c.trigger("owlTableUpdated",[l.column,l.row,f])})}))}}),OwlRow=React.createClass({displayName:"OwlRow",propTypes:{data:React.PropTypes.object.isRequired,
columns:React.PropTypes.array.isRequired,childColumns:React.PropTypes.array,open:React.PropTypes.bool.isRequired},getDefaultProps:function(){return{className:""}},getInitialState:function(){return{open:!1,focusedCell:!1}},componentWillReceiveProps:function(a){this.setState({open:a.open})},clickHandler:function(a){var b=$(a.target);"TD"!==a.target.nodeName&&(b=b.closest("td"));this.setState({open:!0,focusedCell:b})},render:function(){var a=this.props,b=this.state,c=0,d=a.columns.map(function(c,d){var f=
c.editable;if(!1!==c.visible)return React.createElement(OwlCell,{column:c,ref:"column_"+d,row:a.data,isChild:a.isChild,editable:f,focusedCell:b.focusedCell,key:d,tableDidChange:a.tableDidChange})}),c=d.length;0<a.childColumns.length&&_.forEach(a.childColumns,function(k){var e=k.editable,f="column_"+c;!1!==k.visible&&d.push(React.createElement(OwlCell,{column:k,ref:f,row:a.data,isChildColumn:!0,isChild:a.isChild,editable:e,focusedCell:b.focusedCell,key:c,tableDidChange:a.tableDidChange}));c++});var e=
(a.className+" owl-row trow").trim();return React.createElement("tr",{className:e,key:a.key},d)}});function stripFilters(a){_.forOwn(filterOptions,function(b,c){a=a.replace(new RegExp("^"+c),"")});return a}
var filterOptions={"":"Contains","begin:":"Begins with","end:":"Ends with",empty:"Empty","not:empty":"Not empty"},OwlTableReact=React.createClass({displayName:"OwlTable",propTypes:{data:React.PropTypes.array.isRequired,columns:React.PropTypes.array.isRequired,childColumns:React.PropTypes.array,tacky:React.PropTypes.object,massUpdate:React.PropTypes.bool,pageChanged:React.PropTypes.bool,filteringEnabled:React.PropTypes.bool},tableDidChange:function(a,b,c){"undefined"===typeof this.state.changedData[b.id]&&
(this.state.changedData[b.id]={});-1===c.type.indexOf("select")?this.state.changedData[b.id][c.field]="function"===typeof a.target.value?a.target.value():a.target.value:this.state.changedData[b.id][c.field]=$(a.target).swiftbox("value")},getDefaultProps:function(){return{tacky:{top:!1,left:!1},massUpdate:!1,pageChanged:!1,printMode:!1,childColumns:[]}},getInitialState:function(){return{changedData:{},openRows:{},sortReverse:!1,sorted:!1}},componentDidMount:function(){var a=this,b=document.createElement("div");
b.className="owl-filter-list";for(var c in filterOptions){var d=document.createElement("div");d.className="owl-filter-type";d.innerHTML=filterOptions[c];d.setAttribute("data-filter-type",c);b.appendChild(d)}$(document).on("click",".owl-change-filter-type",function(a){b.currentInput=$(this).closest(".owl-filter").find("input");b.style.top=a.pageY+"px";b.style.left=a.pageX+"px";$(b).addClass("active");(document.body||document.documentElement).appendChild(b);a.stopPropagation()});$(document).on("click",
".owl-filter-type",function(c){var d=$(this).data("filterType"),l=stripFilters(b.currentInput.val()),f;switch(d){case "begin:":f=2;break;case "end:":f=4;break;case "empty":f=8;break;case "not:empty":f=32;break;default:f=16}b.currentInput.data("conditionType",f);b.currentInput.val(d+l);b.currentInput.change();$(b).removeClass("active");b.currentInput.focus();if(8===f||32===f)d={condition:f,term:""},l=b.currentInput.closest(".owl-filter").data("field"),a.props.filterDidChange(d,l);c.stopPropagation()});
$(document).on("click",function(a){$(b).removeClass("active")})},componentDidUpdate:function(){this.props.tacky&&$(".tacky").tacky()},componentWillReceiveProps:function(a){!0===a.pageChanged&&this.setState({openRows:{}})},sortClickHandler:function(a,b){var c=this.state,d=c.sortReverse;!1===c.sorted?this.setState({sorted:!0},function(){this.props.sortClickHandler(a,d)}):(d=!d,this.setState({sortReverse:d}),this.props.sortClickHandler(a,d))},filterFieldChanged:function(a,b){b.persist();var c=this;_.debounce(function(a,
b){b.persist();a.condition=$(b.target).data("conditionType");a.term=stripFilters(b.target.value);c.props.filterDidChange(a)},200)(a,b)},keyup:function(a){var b=$(a.target).parent(),c=!1;switch(a.which){case 9:!0!==a.shiftKey?b.next().children().focus():b.prev().children().focus(),c=!0}!0===c&&a.stopPropagation()},render:function(){function a(a){return"undefined"!==typeof a.tacky&&!0===a.tacky.left}var b=this,c=b.props,d=!1;c.tacky&&c.tacky.top&&(d=!0);var e;c.filteringEnabled&&(e=c.columns.map(function(f,
d){"undefined"===typeof f.filters&&(f.filters=[{predicate:"",type:"contains"}]);var k=f.filters.map(function(a,g){if("checkbox"!==f.type){var d=0===g?" owl-filter-button-add":" owl-filter-button-remove",u=0===g?c.addFilter.bind(this,f):c.removeFilter.bind(this,f,g);return React.createElement("div",{"data-field":f.field,key:g,className:"owl-filter"},React.createElement("div",{onClick:u,className:"owl-filter-button"+d}),React.createElement("input",{type:"text",className:"owl-filter-input",onChange:b.filterFieldChanged.bind(null,
a),defaultValue:a.predicate}),React.createElement("div",{className:"owl-change-filter-type"}))}return React.createElement("label",{key:g,className:"owl-filter"},React.createElement("input",{type:"checkbox",className:"owl-filter-checkbox",onChange:b.filterFieldChanged.bind(null,a),value:"Y"}))}),e="";a(f)&&(e=" tacky-left");return React.createElement("th",{key:d,className:"tacky-top"+e},React.createElement("div",{className:"owl-filter-wrapper"},k))}),e=React.createElement("tr",{className:"owl-filter-row"},
" ",e," "));var k=-1,l=c.columns.map(function(c,f){var e="owl-table-sortElement",l="owl_header_"+c.field;d&&(e+=" tacky-top");a(c)&&(e+=" tacky-left");k++;if(!1!==c.visible)return React.createElement("th",{onClick:_.partial(b.sortClickHandler,c.field),className:e,id:l,key:k,"data-field":c.field},c.title||"None")});0<c.childColumns.length&&_.forEach(c.childColumns,function(a,b){var c="owl_child_header_"+a.field,f="";d&&(f="tacky-top");!1!==a.visible&&(k++,l.push(React.createElement("th",{className:f,
key:k,id:c,"data-field":a.field},a.title||"None")))});var f=[],r=0;_.forEach(c.data,function(a,d){var e=a.children;if(!_.isUndefined(e)&&_.isArray(e))for(var k in e[0])e[0].hasOwnProperty(k)&&(a[k]=e[0][k]);f.push(React.createElement(OwlRow,{data:a,columns:c.columns,childColumns:c.childColumns,key:r,open:b.state.openRows[d]||!1,tableDidChange:b.tableDidChange}));r++;!_.isUndefined(e)&&_.isArray(e)&&_.forEach(e,function(a,d){if(0!==d){var e="owl-child-row";1===d&&(e+=" owl-child-shadow");f.push(React.createElement(OwlRow,
{data:a,className:e,isChild:!0,childColumns:c.childColumns,columns:c.columns,key:r,open:b.state.openRows[d]||!1,tableDidChange:b.tableDidChange}));r++}})});var q="owl-table tacky";!1!==c.printMode&&(q+=" owl-table-print");return React.createElement("table",{onKeyUp:b.keyup,id:"owl-table",className:q},React.createElement("thead",null,e,React.createElement("tr",null,l)),React.createElement("tbody",{className:"tbody"},f))}});(function(a){a.module("owlTable","ngAnimate ngSanitize ngCsv ui.bootstrap angular-ladda owlTablePartials".split(" "))})(window.angular);
(function(a){a.module("owlTable").constant("owlConstants",{defaults:{PER_PAGE:25},exceptions:{noSaveRoute:{type:"OwlException: noSaveRoute",error:"No save route provided to table!"},noRow:{type:"OwlException: noRow",error:"Row does not exist"},badData:{type:"OwlException: badData",error:"Invalid data collection tried to be set on owlTable service"}},filtering:{STARTS_WITH:2,ENDS_WITH:4,EMPTY:8,CONTAINS:16,NOT_EMPTY:32,defaults:{term:"",condition:16,flags:{caseSensitive:!1}}}})})(window.angular);
(function(a){function b(a,b){var e=document.getElementById("owlPrintSection");e||(e=document.createElement("div"),e.id="owlPrintSection",document.body.appendChild(e));return{link:function(b,d,f,r){d.on("click",function(){var b=document.getElementById(f.printElementId);b&&(r.tableWillPrint(),b=b.cloneNode(!0),e.appendChild(b),a.print())});a.matchMedia&&a.matchMedia("print").addListener(function(a){a.matches||q()});a.onafterprint=q;var q=function(){r.tableDidPrint();e.innerHTML=""}},restrict:"A",require:"^owlTable"}}
b.$inject=["$window","owlTable"];a.module("owlTable").directive("owlPrint",b)})(window.angular);
(function(a,b,c){function d(){var a=function(b,c){if(b&&a.cache[b])return a.cache[b];if(b&&c)return a.cache[b]=c,a.cache[b]};a.cache={};a.clear=function(){a.cache={}};return a}function e(c,e){return{hasNoFilters:function(a){return b.every(a,function(a){var c=!1;return c=b.isEmpty(a.filters)?!0:b.every(a.filters,function(a){return"undefined"===typeof a.term||""===a.term})})},getTerm:function(a){if("undefined"===typeof a.term)return a.term;a=a.term;"string"===typeof a&&(a=a.trim());return a},stripTerm:function(a){a=
this.getTerm(a);return"string"===typeof a?e.escapeRegExp(a.replace(/(^\*|\*$)/g,"")):a},guessConditionRegex:function(a){if("undefined"===typeof a.term||!a.term)return c.filtering.defaults.condition;var b=this.getTerm(a);if(/\*/.test(b)){var d="";a.flags&&a.flags.caseSensitive||(d+="i");a=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+a+"$",d)}return c.filtering.defaults.condition},filterCell:function(a,b,d,e,m){var l=typeof m.condition;"undefined"!==l&&l||(m.condition=
c.filtering.CONTAINS);if(8===m.condition||32===m.condition)m.term="foo";e=b.field+e;var n=a[b.field],p=this.stripTerm(m);if(null===p||void 0===p||""===p)return!0;if(m.condition instanceof RegExp){if(!m.condition.test(n))return!1}else{if("function"===l)return m.condition(p,n,a,b);if(m.condition===c.filtering.STARTS_WITH){if(!(d(e)?d(e):d(e,new RegExp("^"+p,"i"))).test(n))return!1}else if(m.condition===c.filtering.ENDS_WITH){if(!(d(e)?d(e):d(e,new RegExp(p+"$","i"))).test(n))return!1}else if(8===m.condition){if(0!==
n.length)return!1}else if(m.condition===c.filtering.CONTAINS){if(!(d(e)?d(e):d(e,new RegExp(p,"i"))).test(n))return!1}else if(m.condition===c.filtering.NOT_EMPTY&&0===n.length)return!1}return!0},filterColumn:function(a,b,c){var d;if("undefined"!==typeof b.filters&&b.filters&&0<b.filters.length)d=b.filters;else return!0;for(var e in d)if(d.hasOwnProperty(e)&&!0===this.filterCell(a,b,c,e,d[e]))return!0;return!1},filterTable:function(b,c){var e=this;if(b){var k=new d,l=[],s=[];a.forEach(c,function(a){"undefined"!==
typeof a.filters&&0<a.filters.length&&"undefined"!==typeof a.filters[0].term&&a.filters[0].term?l.push(a):"undefined"!==typeof a.filters&&a.filters&&"undefined"!==typeof a.filters[0].term&&a.filters[0].term?l.push(a):"undefined"===typeof a.filters||8!==a.filters[0].condition&&32!==a.filters[0].condition||l.push(a)});var n=!1;0<l.length&&a.forEach(b,function(b){n=!0;a.forEach(l,function(a){!1===e.filterColumn(b,a,k)&&(n=!1)});!0===n&&s.push(b)});k.clear();return s}}}}e.$inject=["owlConstants","owlUtils"];
a.module("owlTable").service("owlFilter",e)})(window.angular,window._,window.jQuery);
(function(a,b){function c(a,c){return function(c){var e="";"undefined"!==typeof c.saveUrl&&(e=c.saveUrl);var f=c.params,r={},q=[{id:c.id}];q[0][c.column]=c.value;"undefined"!==typeof f&&(r=b.clone(f));r.data=q;return{id:c.id,column:c.column,value:c.value,saveUrl:e,save:function(){return a({method:"post",url:e,data:r})}}}}c.$inject=["$http","owlUtils"];a.module("owlTable").factory("owlResource",c)})(window.angular,window._);
(function(a,b,c,d,e){function k(a,f,k,q,h,m,s,n){var p,g={tables:[],data:[],pageData:[],filteredData:[],columns:[],options:{sort:{column:"id",order:"asc"}},renderedTable:{},page:1,pages:1,total:0,count:h.defaults.PER_PAGE,hasChangedData:!1,filteringEnabled:!1,lockedCells:[]},t={sort:{column:"id",order:"asc"},saveCallbacks:{success:b.noop,error:b.noop}};g.initialize=function(a){this.data=a.data;this.columns=a.columns;this.childColumns=a.childColumns;this.options=b.defaults(a.options,t);b.forEach(this.columns,
function(a){"undefined"===typeof a.visible&&(a.visible=!0)});p=d.createElement(e,{data:a.data,columns:a.columns,childColumns:a.childColumns,tacky:a.options.tacky,lockedCells:[],addFilter:function(a){a.filters.push({});g.renderedTable.setProps({columns:g.columns})},removeFilter:function(a,b){a.filters.splice(b,1);g.renderedTable.setProps({columns:g.columns})},massUpdate:a.options.massUpdate,sortClickHandler:this.sortClickHandler,filterDidChange:this.filterDidChange.bind(this),filteringEnabled:this.filteringEnabled});
return this};g.sortClickHandler=function(a,b){"undefined"!==typeof b&&null!==b&&""!==b&&(g.options.sort.order=!0===b?"desc":"asc");g.options.sort.column=a;g.sort()};g.renderInto=function(a){this.renderedTable=d.render(p,a);this.container=a;return this.renderedTable};g.registerTable=function(a,b){this.tables.push({id:a,callbacks:c.Callbacks().add(b)})};g.currentPageOfData=function(a){var b=(this.page-1)*this.count,c=this.page*this.count,c=0<c?c:1;return"undefined"!==typeof a?a.slice(b,c):this.filteringEnabled?
this.filteredData.slice(b,c):this.data.slice(b,c)};g.sorted=function(a){var d="desc"===this.options.sort.order?!0:!1,e=b.where(this.columns,{field:this.options.sort.column})[0];return"undefined"!==typeof e&&-1<e.type.indexOf("select")?k("orderBy")(a,function(a){return(a=b.where(e.options,{value:a[e.field]})[0])?c("<p>").html(a.text).text():""},d):k("orderBy")(a,this.options.sort.column,d)};g.sort=function(){this.updateData(this.sorted(this.data))};g.syncDataFromView=function(a,c,d){b(this.data).where({id:a.id}).first()[c.field]=
d;f.$apply(function(){this.hasChangedData=!0}.bind(this))};g.updateData=function(a){"undefined"!==typeof a&&(this.data=a,this.paginateNoApply({total:a.length}),this.renderedTable.setProps({data:this.currentPageOfData()}))};g.customizeColumns=function(){var a=this;q.open({templateUrl:"partials/columnModal.html",controller:["$scope","$modalInstance","columns",function(a,c,d){a.columns=d;a.visibleColumns=b.filter(d,function(a){return!1!==a.visible});a.toggleColumn=function(a){a.visible=!a.visible};a.ok=
function(){c.close(a.columns)}}],size:"lg",resolve:{columns:function(){return a.columns}},backdrop:"static"}).result.then(function(b){f.$broadcast("owlTableColumnsCustomized",b);a.updateColumns(b)})};g.updateColumns=function(a){this.columns=a;this.renderedTable.setProps({columns:this.columns})};g.updateChildColumns=function(a){"undefined"!==typeof a&&(this.childColumns=a,this.renderedTable.setProps({childColumns:this.childColumns}))};g.updateOptions=function(a){this.options=a;this.renderedTable.setProps({tacky:this.options.tacky})};
g.updateTacky=function(a){this.options.tacky=a};g.clearAllChanged=function(a){this.renderedTable.setState({changedData:{}});"undefined"!==typeof a&&a()};g.tableWithId=function(a){return this.tables.map(function(b){if(b.id===a)return b})};g.setCount=function(a){this.count=a};g.nextPage=function(){this.page<this.pages&&(this.page+=1);this.renderedTable.setProps({data:this.currentPageOfData(),pageChanged:!0})};g.prevPage=function(){1<this.page&&(this.page-=1);this.renderedTable.setProps({data:this.currentPageOfData(),
pageChanged:!0})};g.paginateNoApply=function(a){"undefined"!==typeof a.count&&(this.count=a.count);this.pages=Math.ceil(a.total/this.count);this.total=a.total;this.page=1};g.paginate=function(a){f.$$phase||f.$apply(function(){this.paginateNoApply(a)}.bind(this))};g.saveAllChanged=function(){var c={},d=this;this.throwIfNoSaveRoute();"undefined"!==typeof this.options.ajaxParams&&(c=b.clone(this.options.ajaxParams.post));c.data=this.renderedTable.state.changedData;return a({method:"post",url:this.options.saveUrl,
data:c}).then(function(a){d.renderedTable.setState({changedData:{}});d.hasChangedData=!1;d.options.saveCallbacks.success(a)},function(a){d.options.saveCallbacks.error(a)})};g.saveRow=function(a,b,c){var d,e=this.options.saveCallbacks.success,g=this.options.saveCallbacks.error;this.throwIfNoSaveRoute();"undefined"!==typeof this.options.ajaxParams&&(d=this.options.ajaxParams.post||"");return m({id:b.id,column:a.field,value:c,saveUrl:this.options.saveUrl,params:d}).save().then(e,g)};g.lockCell=function(a,
c){var d=s.firstRowIfExists(b.filter(this.data,function(b){return b.id==a}));d&&("undefined"===typeof d.lockedCells&&(d.lockedCells=[]),d.lockedCells.push(c),d.lockedCells=b.uniq(d.lockedCells))};g.unlockCell=function(a,c){var d=s.firstRowIfExists(b.filter(this.data,function(b){return b.id==a}));d.lockedCells=b.without(d.lockedCells,c)};g.isDirty=function(){return this.hasChangedData||!b.isEmpty(this.renderedTable.state.changedData)};g.throwIfNoSaveRoute=function(){if("undefined"===typeof this.options.saveUrl||
null===this.options.saveUrl||""===this.options.saveUrl)throw h.exceptions.noSaveRoute;};g.toggleFiltering=function(){(this.filteringEnabled=!this.filteringEnabled)?(this.filteredData=b.filter(this.data,function(){return!0}),this.renderedTable.setProps({filteringEnabled:this.filteringEnabled})):(this.filteredData=[],this.renderedTable.setProps({filteringEnabled:this.filteringEnabled,data:this.currentPageOfData()}))};g.filterDidChange=function(a,c){"undefined"!==typeof c&&(b.where(this.columns,{field:c})[0].filters[0]=
a);var d=n.filterTable(this.data,this.columns);n.hasNoFilters(this.columns)?this.setFilteredData().andRender():this.setFilteredData(d).andRender()};g.setFilteredData=function(a){if("undefined"!==typeof a&&a)if(b.isFunction(a))this.filteredData=a();else if(b.isArray(a))this.filteredData=a;else throw h.exceptions.badData;else this.filteredData=b.filter(this.data,function(){return!0});this.paginate({total:this.filteredData.length});return this};g.andRender=function(){this.renderedTable.setProps({data:this.currentPageOfData()})};
g.prepareForPrinting=function(){this.renderedTable.setProps({data:this.data,printMode:!0})};g.finishedPrinting=function(){this.renderedTable.setProps({data:this.currentPageOfData(),printMode:!1})};return g}k.$inject="$http $rootScope $filter $modal owlConstants owlResource owlUtils owlFilter".split(" ");a.module("owlTable").service("owlTable",k)})(window.angular,window._,window.jQuery,window.React,window.OwlTableReact);
(function(a){function b(a){return{firstRowIfExists:function(a){return"undefined"===typeof a||0===a.length?!1:a[0]},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}}b.$inject=["owlConstants"];a.module("owlTable").service("owlUtils",b)})(window.angular);(function(a){function b(a){return{restrict:"EA",require:"^owlTable",templateUrl:"partials/customizeColumns.html"}}b.$inject=["owlTable"];a.module("owlTable").directive("owlCustomizeColumns",b)})(window.angular);
(function(a){function b(a){return{restrict:"EA",require:"^owlTable",templateUrl:"partials/export.html",controllerAs:"exportCtrl",compile:function(a,b){return function(a,b,c){}},controller:["$scope",function(a){this.csvHeader=function(){return a.columns.map(function(a){return a.title})}}]}}b.$inject=["owlTable"];a.module("owlTable").directive("owlExportControls",b)})(window.angular);
(function(a){function b(a){return{restrict:"EA",require:"^owlTable",templateUrl:"partials/filter.html",compile:function(a,b){return function(a,b,c){}}}}b.$inject=["owlTable"];a.module("owlTable").directive("owlFilterControls",b)})(window.angular);(function(a){function b(a){return{restrict:"EA",require:"^owlTable",templateUrl:"partials/pagination.html",compile:function(a,b){return function(a,b,c){}}}}b.$inject=["owlTable"];a.module("owlTable").directive("owlPagination",b)})(window.angular);
(function(a,b,c,d){function e(b,e,f){return{restrict:"EA",scope:{data:"=",columns:"=",options:"=",childColumns:"="},templateUrl:"partials/table.html",controllerAs:"owlCtrl",compile:function(r,q){return function(h,m,q){var n;q=m.find(".owl-react-container")[0];f.registerTable(m[0].id);h.loading=!0;h.takingAWhile=!1;h.saved=!1;h.printing=!1;h.owlCtrl.massUpdate=!1;h.massUpdateData={};h.lockedCells=f.lockedCells;b(function(){h.takingAWhile=!0},5E3);n=f.initialize({data:h.data,columns:h.columns,options:h.options,
childColumns:h.childColumns}).renderInto(q);h.$watch("data",function(a){0<a.length&&(f.updateData(a),h.loading=!1)},!0);h.$watchCollection("columns",function(a,b){a!==b&&(f.updateColumns(a),p())});h.$watch("childColumns",function(a,b){f.updateChildColumns(a);p()},!0);h.$watch("options",function(a,b){f.updateOptions(a,b)},!0);h.$watch("owlCtrl.massUpdate",function(a){!0===a&&c(".owl-mass-update-header").each(function(a,b){b=c(b);var d=b.data("field");c('.owl-table-sortElement[data-field="'+d+'"]')});
n.setProps({massUpdate:a})});h.massUpdate=function(){h.data=h.data.map(function(b,c){c<f.page*f.count-1&&a.forEach(h.massUpdateData,function(a,c){b[c]=a});return b})};a.element(e).on("beforeunload",function(){if(f.isDirty())return"You have unsaved changes.  They will be lost if you leave."}).on("resize",function(){p()});m.on("owlTableUpdated",function(a,c,d,e){h.options.saveIndividualRows&&f.saveRow(c,d,e).then(function(a){h.saved=!0;b(function(){h.saved=!1},2E3)});f.syncDataFromView(d,c,e)});m=document.getElementById("owl-spin");
(new d({lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!0,hwaccel:!1,className:"spinner",zIndex:2E9,top:"50%",left:"50%"})).spin(m);var p=function(){var a=c("owl-table").find("th");a.width()*a.length>c(".owl-wrapper").width()&&c(".owl-table-wrapper").addClass("owl-stretch-after-load")};p()}},controller:["$scope",function(a){var c=this;this.owlTable=f;this.hasChangedData=f.hasChangedData;this.nextPage=function(){f.nextPage()};this.prevPage=
function(){f.prevPage()};this.savePage=function(){this.saving=!0;f.saveAllChanged();b(function(){c.saving=!1},2E3)}}]}}e.$inject=["$timeout","$window","owlTable"];a.module("owlTable").directive("owlTable",e)})(window.angular,window._,window.jQuery,window.Spinner);(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/columnModal.html",'<div class="modal-header"><h3 class="modal-title">Customize Columns</h3></div><div class="modal-body owl-modal-body"><ul class="row"><li ng-repeat="column in columns" class="col-md-4 col-sm-4 col-lg-4"><a ng-attr-id="{{\'customize_\' + column.field}}" ng-click="toggleColumn(column)" ng-class="{strikethrough: !column.visible}">{{ column.title }}</a></li></ul></div><div class="modal-footer"><button ng-click="ok()" class="btn btn-primary owl-column-modal-ok">Ok</button></div>')}])})();
(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/customizeColumns.html",'<span class="owl-customize-columns"><button ng-click="owlCtrl.owlTable.customizeColumns()" class="btn btn-xs btn-primary owl-customize-columns-button">Customize Columns</button></span>')}])})();
(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/export.html",'<div class="owl-export-controls"><span class="owl-control-label">Export:</span><span class="owl-export-buttons"><span type="button" ng-csv="data" filename="focus.csv" csv-header="exportCtrl.csvHeader()" class="owl-export-button-csv"></span><span type="button" owl-print="owl-print" print-element-id="owl-table" class="owl-export-button-print"></span></span></div>')}])})();
(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/filter.html",'<div class="owl-filter-controls"><span class="owl-control-label">Filters:</span><span ng-click="owlCtrl.owlTable.toggleFiltering()" class="owl-filter-buttons"><span ng-if="owlCtrl.owlTable.filteringEnabled">ON</span><span ng-if="!owlCtrl.owlTable.filteringEnabled">OFF</span></span></div>')}])})();
(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/pagination.html",'<div class="owl-pagination-buttons active"><button ng-click="owlCtrl.prevPage()" class="owl-pagination-button owl-previous-page">&lt; Prev</button><div class="owl-page-count">Page <input type="text" size="3" ng-model="owlCtrl.owlTable.page">&nbsp;&nbsp;of {{owlCtrl.owlTable.pages}}</div><button ng-click="owlCtrl.nextPage()" class="owl-pagination-button owl-next-page">Next &gt;</button></div>')}])})();
(function(a){try{a=angular.module("owlTablePartials")}catch(b){a=angular.module("owlTablePartials",[])}a.run(["$templateCache",function(a){a.put("partials/table.html",'<div class="container-fluid owl-wrapper"><div class="owl-top-controls"><owl-pagination></owl-pagination><owl-export-controls></owl-export-controls><owl-filter-controls></owl-filter-controls><owl-customize-columns ng-if="options.customizeColumns"></owl-customize-columns><span class="owl-top-control-right-buttons"><div ng-if="options.massUpdate === true" class="form-inline owl-top-control-right owl-top-control-mass-update"><div class="form-group"><div class="checkbox"><label><input id="massUpdateToggle" type="checkbox" value="true" ng-model="owlCtrl.massUpdate">Mass Update</label></div></div><div ng-if="owlCtrl.massUpdate" class="form-group"><button id="massUpdate" ng-click="massUpdate()" class="btn btn-sm btn-default">Run Mass Update</button></div></div><div ng-if="options.saveIndividualRows !== true" class="owl-top-control-right owl-top-control-save"><div ng-hide="saved !== true">Saved</div><button id="saveButton" ng-class="{\'btn-danger\': owlCtrl.owlTable.hasChangedData, \'btn-default\': !owlCtrl.owlTable.hasChangedData}" ng-click="owlCtrl.savePage()" ng-disabled="!owlCtrl.owlTable.hasChangedData" ladda="owlCtrl.saving" data-style="expand-left" data-spinner-color="#FFF000" class="btn btn-sm btn-default">Save</button></div></span></div><div ng-class="{\'owl-stretch\': loading}" class="owl-table-wrapper"><div ng-show="owlCtrl.massUpdate" class="owl-mass-update-row"><table><thead><tr><th data-field="{{column.field}}" ng-repeat="column in columns track by $index" class="owl-mass-update-header">{{column.title}}</th></tr></thead><tbody><tr><td ng-repeat="column in columns track by $index" class="owl-mass-update-cell"><input type="text" ng-model="massUpdateData[column.field]"></td></tr></tbody></table></div><div ng-hide="loading === true" class="owl-table-inner-wrapper table-responsive tacky"><div class="owl-react-container"></div></div><div ng-show="loading === true" class="owl-ajax-loading"><div class="owl-ajax-loading-interior"><div id="owl-spin"></div><p ng-show="takingAWhile !== true" class="owl-ajax-loading-label">Loading data...</p><p ng-show="takingAWhile === true">Sorry, things are taking a little longer than normal...</p></div></div></div><owl-pagination></owl-pagination></div>')}])})();
